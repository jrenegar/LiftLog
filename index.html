<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
  <title>Workout Tracker</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="manifest" href="manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="icon-192.png">
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js');
    }
  </script>
  <!-- PouchDB local DB for offline history -->
  <script src="https://unpkg.com/pouchdb@7.3.1/dist/pouchdb.min.js"></script>
</head>

<body>

<div class="top-bar">
    <div class="timer-display">
        <div><strong>Elapsed:</strong> <span id="elapsedDisplay">00:00</span></div>
        <div><strong>Timer:</strong> <span id="countdownDisplay">00:00</span></div>
    </div>
    <div class="timer-buttons">
        <button data-action="startCountdown" data-seconds="60">60s</button>
        <button data-action="startCountdown" data-seconds="90">90s</button>
        <button data-action="startCountdown" data-seconds="120">2m</button>
        <button data-action="startCountdown" data-seconds="180">3m</button>
    </div>
</div>

<h2>Workout Log</h2>

<div id="logContainer"></div>

<button class="add-exercise-main" data-action="openAddExerciseModal">+ Add Exercise</button>
<button class="import-exercises-main" data-action="openImportModal">Import Exercises</button>
<button class="export-btn" data-action="openExportModal">Export Exercises</button>
<button class="confirm-modal" data-action="saveWorkout" style="margin-top:10px;">Save Workout</button>
<button class="confirm-modal" data-action="openHistory" style="margin-top:10px;">History</button>

<!-- Add Exercise Modal -->
<div id="addExerciseModalBg" class="modal-bg">
    <div class="modal">
        <h3>Select Exercise</h3>
        <select id="exerciseSelect">
            <option>Bench Press</option>
            <option>Squat</option>
            <option>Deadlift</option>
            <option>Overhead Press</option>
            <option>Barbell Row</option>
            <option>Lat Pulldown</option>
            <option>Bicep Curl</option>
            <option>Tricep Pushdown</option>
            <option>Leg Press</option>
        </select>
        <button class="confirm-modal" data-action="addExercise">Add</button>
        <button class="close-modal" data-action="closeAddExerciseModal">Cancel</button>
    </div>
</div>

<!-- Import Exercises Modal -->
<div id="importModalBg" class="modal-bg">
    <div class="modal">
        <h3>Import Exercises</h3>
        <p>Paste exercises here. <br>Format: 'ExerciseName [weightxreps|reps]'</p>
        <textarea id="importText" rows="8" placeholder="Bench Press 100x10 105x8 110x6&#10;Squat 12-15 10-12&#10;Deadlift"></textarea>
        <button class="confirm-modal" data-action="importExercises">Import</button>
        <button class="close-modal" data-action="closeImportModal">Cancel</button>
    </div>
</div>

<!-- Export Modal -->
<div id="exportModalBg" class="modal-bg">
    <div class="modal">
        <h3>Export Exercises</h3>
        <textarea id="exportText" rows="10" readonly></textarea>
        <button class="confirm-modal" data-action="copyExport">Copy to Clipboard</button>
        <button class="close-modal" data-action="closeExportModal">Close</button>
    </div>
</div>

<!-- History Page (full-screen) -->
<div id="historyPage" class="history-page" style="display:none;">
    <div style="max-width:900px; margin:12px auto;">
        <div style="display:flex; justify-content:space-between; align-items:center; gap:12px;">
            <h3 style="margin:0;">Workout History</h3>
            <div style="display:flex; gap:8px;">
                <button class="confirm-modal" data-action="editCurrentWorkout">Edit</button>
                <button class="close-modal" data-action="closeHistory">Close</button>
            </div>
        </div>
        <div id="historyCarousel" style="display:flex; align-items:center; gap:8px; margin-top:8px;">
            <button data-action="historyPrev">◀</button>
            <div id="historySlide" style="flex:1; min-height:140px; background:#1b1b1b; padding:14px; border-radius:8px; overflow:auto; color:#d4d4d4;"></div>
            <button data-action="historyNext">▶</button>
        </div>
        <div id="historyCounter" style="color:#d4d4d4; font-size:13px; margin-top:8px;"></div>
    </div>
</div>

<script type="module" src="app.js"></script>


</body>
</html>
